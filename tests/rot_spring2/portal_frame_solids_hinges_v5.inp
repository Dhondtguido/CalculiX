*HEADING
Portal frame solids + hinges (meshed) - v5

*NODE
1, -0.100000, 0.000000, -0.100000
2, 0.100000, 0.000000, -0.100000
3, -0.100000, 0.500000, -0.100000
4, 0.100000, 0.500000, -0.100000
5, -0.100000, 1.000000, -0.100000
6, 0.100000, 1.000000, -0.100000
7, -0.100000, 1.500000, -0.100000
8, 0.100000, 1.500000, -0.100000
9, -0.100000, 2.000000, -0.100000
10, 0.100000, 2.000000, -0.100000
11, -0.100000, 2.500000, -0.100000
12, 0.100000, 2.500000, -0.100000
13, -0.100000, 3.000000, -0.100000
14, 0.100000, 3.000000, -0.100000
15, -0.100000, 0.000000, 0.100000
16, 0.100000, 0.000000, 0.100000
17, -0.100000, 0.500000, 0.100000
18, 0.100000, 0.500000, 0.100000
19, -0.100000, 1.000000, 0.100000
20, 0.100000, 1.000000, 0.100000
21, -0.100000, 1.500000, 0.100000
22, 0.100000, 1.500000, 0.100000
23, -0.100000, 2.000000, 0.100000
24, 0.100000, 2.000000, 0.100000
25, -0.100000, 2.500000, 0.100000
26, 0.100000, 2.500000, 0.100000
27, -0.100000, 3.000000, 0.100000
28, 0.100000, 3.000000, 0.100000
29, 3.900000, 0.000000, -0.100000
30, 4.100000, 0.000000, -0.100000
31, 3.900000, 0.500000, -0.100000
32, 4.100000, 0.500000, -0.100000
33, 3.900000, 1.000000, -0.100000
34, 4.100000, 1.000000, -0.100000
35, 3.900000, 1.500000, -0.100000
36, 4.100000, 1.500000, -0.100000
37, 3.900000, 2.000000, -0.100000
38, 4.100000, 2.000000, -0.100000
39, 3.900000, 2.500000, -0.100000
40, 4.100000, 2.500000, -0.100000
41, 3.900000, 3.000000, -0.100000
42, 4.100000, 3.000000, -0.100000
43, 3.900000, 0.000000, 0.100000
44, 4.100000, 0.000000, 0.100000
45, 3.900000, 0.500000, 0.100000
46, 4.100000, 0.500000, 0.100000
47, 3.900000, 1.000000, 0.100000
48, 4.100000, 1.000000, 0.100000
49, 3.900000, 1.500000, 0.100000
50, 4.100000, 1.500000, 0.100000
51, 3.900000, 2.000000, 0.100000
52, 4.100000, 2.000000, 0.100000
53, 3.900000, 2.500000, 0.100000
54, 4.100000, 2.500000, 0.100000
55, 3.900000, 3.000000, 0.100000
56, 4.100000, 3.000000, 0.100000
57, 0.000000, 2.900000, -0.100000
58, 0.666667, 2.900000, -0.100000
59, 1.333333, 2.900000, -0.100000
60, 2.000000, 2.900000, -0.100000
61, 2.666667, 2.900000, -0.100000
62, 3.333333, 2.900000, -0.100000
63, 4.000000, 2.900000, -0.100000
64, 0.000000, 3.100000, -0.100000
65, 0.666667, 3.100000, -0.100000
66, 1.333333, 3.100000, -0.100000
67, 2.000000, 3.100000, -0.100000
68, 2.666667, 3.100000, -0.100000
69, 3.333333, 3.100000, -0.100000
70, 4.000000, 3.100000, -0.100000
71, 0.000000, 2.900000, 0.100000
72, 0.666667, 2.900000, 0.100000
73, 1.333333, 2.900000, 0.100000
74, 2.000000, 2.900000, 0.100000
75, 2.666667, 2.900000, 0.100000
76, 3.333333, 2.900000, 0.100000
77, 4.000000, 2.900000, 0.100000
78, 0.000000, 3.100000, 0.100000
79, 0.666667, 3.100000, 0.100000
80, 1.333333, 3.100000, 0.100000
81, 2.000000, 3.100000, 0.100000
82, 2.666667, 3.100000, 0.100000
83, 3.333333, 3.100000, 0.100000
84, 4.000000, 3.100000, 0.100000
1001, 0.000000, 3.000000, 0.000000
1002, 0.000000, 3.000000, 0.000000
1003, 4.000000, 3.000000, 0.000000
1004, 4.000000, 3.000000, 0.000000
1101, 0.000000, 3.000000, 0.000000
1102, 0.000000, 3.000000, 0.000000
1103, 4.000000, 3.000000, 0.000000
1104, 4.000000, 3.000000, 0.000000

*ELEMENT, TYPE=C3D8R, ELSET=E_COL_L
1, 1, 2, 4, 3, 15, 16, 18, 17
2, 3, 4, 6, 5, 17, 18, 20, 19
3, 5, 6, 8, 7, 19, 20, 22, 21
4, 7, 8, 10, 9, 21, 22, 24, 23
5, 9, 10, 12, 11, 23, 24, 26, 25
6, 11, 12, 14, 13, 25, 26, 28, 27
*ELEMENT, TYPE=C3D8R, ELSET=E_COL_R
7, 29, 30, 32, 31, 43, 44, 46, 45
8, 31, 32, 34, 33, 45, 46, 48, 47
9, 33, 34, 36, 35, 47, 48, 50, 49
10, 35, 36, 38, 37, 49, 50, 52, 51
11, 37, 38, 40, 39, 51, 52, 54, 53
12, 39, 40, 42, 41, 53, 54, 56, 55
*ELEMENT, TYPE=C3D8R, ELSET=E_BEAM
13, 57, 58, 65, 64, 71, 72, 79, 78
14, 58, 59, 66, 65, 72, 73, 80, 79
15, 59, 60, 67, 66, 73, 74, 81, 80
16, 60, 61, 68, 67, 74, 75, 82, 81
17, 61, 62, 69, 68, 75, 76, 83, 82
18, 62, 63, 70, 69, 76, 77, 84, 83

*ELSET, ELSET=E_ALL
E_COL_L, E_COL_R, E_BEAM

*MATERIAL, NAME=STEEL
*ELASTIC
2.10E11, 0.30
*DENSITY
7850.
*SOLID SECTION, ELSET=E_ALL, MATERIAL=STEEL

*NSET, NSET=COL_L_BASE
1, 2, 15, 16
*NSET, NSET=COL_R_BASE
29, 30, 43, 44
*NSET, NSET=COL_L_TOP
13, 14, 27, 28
*NSET, NSET=COL_R_TOP
41, 42, 55, 56
*NSET, NSET=BEAM_L_END
57, 64, 71, 78
*NSET, NSET=BEAM_R_END
63, 70, 77, 84

*NSET, NSET=REF_COL
1001, 1003
*NSET, NSET=REF_BEM
1002, 1004
*NSET, NSET=ROT_ALL
1101, 1102, 1103, 1104

*RIGID BODY, NSET=COL_L_TOP,  REF NODE=1001, ROT NODE=1101
*RIGID BODY, NSET=BEAM_L_END, REF NODE=1002, ROT NODE=1102
*RIGID BODY, NSET=COL_R_TOP,  REF NODE=1003, ROT NODE=1103
*RIGID BODY, NSET=BEAM_R_END, REF NODE=1004, ROT NODE=1104

** Tie translations at joints (beam refs dependent)
*EQUATION
2
1002, 1, 1.0
1001, 1,-1.0
*EQUATION
2
1002, 2, 1.0
1001, 2,-1.0
*EQUATION
2
1002, 3, 1.0
1001, 3,-1.0

*EQUATION
2
1004, 1, 1.0
1003, 1,-1.0
*EQUATION
2
1004, 2, 1.0
1003, 2,-1.0
*EQUATION
2
1004, 3, 1.0
1003, 3,-1.0

*ELEMENT, TYPE=SPRING2, ELSET=E_HINGE_L
10001, 1101, 1102
*ELEMENT, TYPE=SPRING2, ELSET=E_HINGE_R
10002, 1103, 1104

*BOUNDARY
ROT_ALL, 1, 2, 0.
*BOUNDARY
REF_COL, 3, 3, 0.

*SPRING, ELSET=E_HINGE_L, NONLINEAR
3,3
0.0,     0.0
0.002,  2.0E5
0.020,  2.2E5
*SPRING, ELSET=E_HINGE_R, NONLINEAR
3,3
0.0,     0.0
0.002,  2.0E5
0.020,  2.2E5

*BOUNDARY
COL_L_BASE, 1, 3, 0.
*BOUNDARY
COL_R_BASE, 1, 3, 0.

*STEP
*STATIC
*DLOAD
E_ALL, GRAV, 9.81, 0., -1., 0.
*CLOAD
1003, 1, 5.0E4
*NODE FILE
U
*EL FILE
S
*NODE PRINT, NSET=ROT_ALL
U
*NODE PRINT, NSET=REF_COL
U
*NODE PRINT, NSET=REF_BEM
U
*END STEP
